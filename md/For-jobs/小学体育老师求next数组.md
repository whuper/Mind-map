# 小学体育老师求next数组。

KMP算法是模式匹配算法中比较晦涩难懂的一种解法，KMP算法频繁出现在各大互联网公司的笔试题当中中。

牛客网上搜索关键字：next数组，一共出现1626道试题，1228篇帖子。

于是我翻遍博客园，CSDN，试图找到一个体育老师能看懂的KMP算法之next数组。现试图写出一篇。不讲原理，暴力处理。

当然，原理性的博客在网上挺多，推荐阮一峰阮老师的博客：[http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html](http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html)

仅仅想要一个快速答案的，请看：

拿例子来说事吧。
---

> Q：串 ababaaababaa 的next数组为()

- [ ] A.012345678999   
- [ ] B.012121111212  
- [x] C.011234223456   
- [ ] D.0123012322345

求解方法：

a|b|a|b|a|a|a|b|a|b|a|a
-|-|-|-|-|-|-|-|-|-|-|-
1|2|3|4|5|6|7|8|9|10|11|12

1. 约定俗成next数组的第一位为0。**next[1] = 0;**
2. 约定俗成next数组的第二位为1。**next[2] = 1;**
3. 我们看第三位a，它的前面b，能否和前面的子串匹配呢哪怕一位，结果是一位也不能。所以我们又约定俗成，没有匹配的时候，这一位对应的next数组值为1。**next[3] = 1;**
4. 第四位b，它的前面a可以和第一位的a匹配，所以其next数组值在1的基础上加1。**next[4] = 2;**
5. 第五位a，它的前面的3，4位恰好与1，2位匹配，所以next数组值会在next[4]的基础上再加上1。**next[5]=3**;
6. 第六位a,它前面3，4，5位的元素恰好和1，2，3位的元素匹配，所以在next[5]的基础上+1。**next[6]=4;**
7. 第七位a，此时一直连续匹配的几个元素中断了，我们能看到的是这位哥的前一位（第6位）又要重新去和第一位匹配。因为能匹配一位。所以1+1嘛（前面说过，能匹配一位next数组就为2）。**next[7]=2**。
8. 第八位b，和上面一样，前面的a也只能连续匹配1位。**next[8]=2**。
9. 第九位a，最贴近它的ab子串和第1，2位的子串连续匹配两个元素。**next[9]=3**。
10. 第十位b，7，8，9位和1，2，3位连续匹配。**next[10]=4**。
11. 第十一位，7，8，9，10位形成的子串和1，2，3，4位的元素连续匹配，所以在上面的基础上+1。**next[11]=5**。
12. 第十二位，**next[12]=6**。

写完上面的详解之后，我开始哽咽。MarkDown的可读性太强，写东西太有快感了。另外，边写我边感受到KMP算法所谓的前缀数组和后缀数组。
